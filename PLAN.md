# シンプル横スクロールゲーム 開発計画

## 目標

**とにかくシンプルな横スクロールゲーム**を作る。

- 最小限の機能
- わかりやすいコード
- すぐに遊べる

---

## 1. ゲーム仕様（最小構成）

### 基本ルール

- **プレイヤー**: 白い四角
- **操作**: Spaceキー / クリックでジャンプ
- **目標**: できるだけ遠くまで進む
- **失敗**: 画面下に落ちたらゲームオーバー

### 画面

- 幅: 800px
- 高さ: 400px
- 背景: 暗い色（#1a1a2e）

### ゲーム要素

- **地面**: グレーの四角が連続して流れる
- **障害物**: 赤い壁（ぶつかったらゲームオーバー）
- **穴**: ランダムに出現（落ちたらゲームオーバー）

---

## 2. 技術スタック

### 選択肢

1. **Three.js + Rapier.js**（現在の実装）
   - 3Dレンダリング
   - 本格的な物理エンジン
   - やや複雑

2. **Phaser.js**（シンプル）
   - 2Dゲームに最適
   - 物理エンジン内蔵
   - 軽量・簡単

3. **純JavaScript + Canvas**（最もシンプル）
   - 依存なし
   - 完全制御
   - 実装がやや多め

**推奨**: Phaser.js（バランスが良い）

---

## 3. ファイル構造（シンプル版）

```
chari-dash/
├── index.html       # エントリーポイント
├── src/
│   ├── config.js   # 設定定数
│   ├── game.js     # ゲームロジック（1ファイルにまとめてもOK）
└── README.md
```

**原則**: 必要最小限のファイル数

---

## 4. 実装内容（最小構成）

### 必須機能

1. **プレイヤー表示**
   - 白い四角を表示
   - 重力で落下
   - ジャンプで上昇

2. **地面の流れ**
   - 地面が左に流れる
   - 無限に続く

3. **衝突判定**
   - 地面との衝突
   - 壁との衝突
   - 画面下への落下

4. **UI**
   - スコア表示
   - ゲームオーバー表示
   - リトライ機能

### 削除する機能（シンプル化のため）

- 二段ジャンプ（一段のみ）
- 速度アップ（固定速度）
- 複雑な障害物パターン
- エフェクト・演出

---

## 5. 設定値（シンプル版）

```javascript
const CONFIG = {
  // 画面
  WIDTH: 800,
  HEIGHT: 400,
  
  // 物理
  GRAVITY: 800,        // 重力
  JUMP_VELOCITY: -400, // ジャンプ力
  
  // ゲーム
  GROUND_SPEED: 200,   // 地面の移動速度（固定）
  
  // サイズ
  PLAYER_SIZE: 32,     // プレイヤーサイズ
  GROUND_HEIGHT: 32,   // 地面の高さ
  GROUND_WIDTH: 200,   // 地面1ブロックの幅
  
  // 障害物
  GAP_CHANCE: 0.2,     // 穴の出現確率（低めに）
  WALL_CHANCE: 0.25,   // 壁の出現確率
  WALL_HEIGHT: 60,     // 壁の高さ
};
```

---

## 6. 実装手順（シンプル版）

### Step 1: 基本セットアップ（10分）

- HTMLファイル作成
- ライブラリ読み込み
- 空のゲーム画面表示

### Step 2: プレイヤー表示（15分）

- プレイヤーを表示
- ジャンプ機能
- 重力落下

### Step 3: 地面の流れ（15分）

- 地面を表示
- 左に流れる
- 無限ループ

### Step 4: 衝突判定（15分）

- 地面との衝突
- 壁との衝突
- ゲームオーバー判定

### Step 5: UI追加（10分）

- スコア表示
- ゲームオーバー表示
- リトライ機能

**合計: 約65分**

---

## 7. コードの原則

### シンプルさを優先

1. **1つのファイルにまとめてもOK**
   - 300行以下なら分割不要
   - 理解しやすさ優先

2. **コメントは最小限**
   - コードが自己説明的になるように
   - 複雑な部分だけコメント

3. **機能は削る方向で**
   - 「追加すべきか？」より「削れるか？」
   - 迷ったら削る

4. **定数は1箇所に集約**
   - CONFIGオブジェクトに全て
   - マジックナンバー禁止

---

## 8. 完成の定義

### 遊べる状態

- [ ] プレイヤーが表示される
- [ ] ジャンプできる
- [ ] 地面が流れる
- [ ] 障害物を避けられる
- [ ] ゲームオーバーになる
- [ ] リトライできる
- [ ] スコアが表示される

### やらないこと

- アニメーション
- 効果音
- タイトル画面
- 設定画面
- ランキング
- スキン

---

## 9. 拡張の考え方

### まず完成させる

1. 最小構成で完成
2. 遊んでみる
3. 足りない機能を追加

### 追加する順序

1. **遊びやすさ**
   - 操作感の調整
   - 難易度の調整

2. **見た目**
   - 色の調整
   - シンプルなエフェクト

3. **機能追加**
   - 速度アップ
   - 新しい障害物

---

## 10. この計画のキモ

### シンプルさを最優先

```
複雑 < シンプル
機能追加 < 削除
分割 < 統合（小規模なら）
```

### 進め方

1. **最小構成で動かす**
2. **遊んでみる**
3. **必要最小限だけ追加**

### 判断基準

- 「これがないと遊べないか？」
- 「削っても遊べるか？」
- 「シンプルにできるか？」

**答えが「YES」なら削る・シンプルにする**
